<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aposta Sem Risco - Calculadora de Dutching</title>

  <link rel="icon" href="aposta_sem_risco_favicon.png" type="image/png"> 
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    /* Variáveis CSS para o tema claro (padrão) */
    :root {
        --body-bg-start: #6a11cb; 
        --body-bg-end: #2575fc;   
        --card-bg: #ffffff;
        --text-color-primary: #2c3e50; 
        --text-color-secondary: #5a6a7a; 
        --heading-color: #2c3e50; 
        
        --button-primary-bg: #4a90e2; 
        --button-primary-border: #3a80d2;
        --button-primary-text: white;
        
        --button-secondary-bg: #e74c3c; 
        --button-secondary-border: #cf3a2a;
        --button-secondary-text: white;
        
        --button-highlight-bg: #f39c12; 
        --button-highlight-border: #e08e0b;
        --button-highlight-text: white;

        --table-header-bg: #34495e; 
        --table-header-text: white;
        
        --badge-success-bg: #2ecc71; 
        --badge-danger-bg: #e74c3c; 
        --badge-secondary-bg: #95a5a6; 
        
        --input-bg: white;
        --input-border: #dcdcdc; 
        --input-text-addon-bg: #f5f5f5; 
        --input-text-addon-border: #dcdcdc;
        
        --copy-btn-color: #3498db;
        --info-badge-bg: #3498db; 
        --info-link-color: #3498db;
        
        /* Cores do Toggle Switch - CLARO */
        --toggle-bg-off: #ccc;
        --toggle-circle-off: #f4f4f4;
        --toggle-bg-on: #2ecc71; 
        --toggle-circle-on: #f4f4f4;
        --toggle-icon-color-off: #555; 
        --toggle-icon-color-on: #fff; 
    }

    /* Variáveis CSS para o tema escuro */
    .dark-theme {
        --body-bg-start: #1a1a2e; 
        --body-bg-end: #16213e;   
        --card-bg: #222831; 
        --text-color-primary: #ececec; 
        --text-color-secondary: #aaaaaa; 
        --heading-color: #ececec;
        
        --button-primary-bg: #3498db; 
        --button-primary-border: #2980b9;
        --button-primary-text: white;
        
        --button-secondary-bg: #c0392b; 
        --button-secondary-border: #c0392b;
        --button-secondary-text: white;
        
        --button-highlight-bg: #f1c40f; 
        --button-highlight-border: #f39c12;
        --button-highlight-text: #222831; 

        --table-header-bg: #1a202c; 
        --table-header-text: #ececec;
        
        --badge-success-bg: #27ae60;
        --badge-danger-bg: #e74c3c;
        --badge-secondary-bg: #7f8c8d;
        
        --input-bg: #393e46; 
        --input-border: #4d545e;
        --input-text-addon-bg: #4a545e;
        --input-text-addon-border: #5a758e;
        
        --copy-btn-color: #85c1e9;
        --info-badge-bg: #4a545e;
        --info-link-color: #85c1e9;

        /* Cores do Toggle Switch - ESCURO */
        --toggle-bg-off: #555;
        --toggle-circle-off: #f4f4f4;
        --toggle-bg-on: #3498db; 
        --toggle-circle-on: #f4f4f4;
        --toggle-icon-color-off: #fff; 
        --toggle-icon-color-on: #fff; 
    }

    body {
      background: linear-gradient(to right, var(--body-bg-start), var(--body-bg-end)) !important; 
      font-family: 'Poppins', sans-serif !important; 
      display: block;
      min-height: 100vh;
      padding: 0;
      color: var(--text-color-primary) !important; 
    }
    .container-custom {
        background-color: var(--card-bg) !important;
        border-radius: 1rem !important;
        box-shadow: 0 12px 25px rgba(0,0,0,0.2) !important; 
        padding: 2.5rem !important; 
        width: 95% !important;
        margin: 2rem auto !important;
        max-width: 960px !important;
    }
    h1 {
      font-family: 'Montserrat', sans-serif !important; 
      color: var(--heading-color) !important; 
      font-weight: 700 !important; 
      margin-bottom: 2rem !important; 
    }
    .logo-display { 
        text-align: center;
        margin-bottom: 1.5rem; 
    }
    .logo-display img {
        max-width: 100%;
        height: auto;
        max-height: 180px; 
        display: inline-block; 
        margin: 0 auto; 
    }

    #lucroDisplay, #retornoTotalDisplay {
        font-size: 1.1rem !important; 
        font-weight: 700 !important; 
        padding: 0.6rem 1rem !important; 
        border-radius: 0.5rem !important; 
        display: inline-block !important;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
    }
    #lucroDisplay.bg-success-custom {
        background-color: var(--badge-success-bg) !important; 
        color: white !important;
    }
    #lucroDisplay.bg-danger-custom {
        background-color: var(--badge-danger-bg) !important; 
        color: white !important;
    }
    #retornoTotalDisplay.bg-secondary-custom {
        background-color: var(--badge-secondary-bg) !important;
        color: white !important;
    }
    .table-dark th {
        background-color: var(--table-header-bg) !important; 
        color: var(--table-header-text) !important;
        text-align: center !important;
        padding: 0.8rem !important; 
    }
    .table-responsive {
        margin-top: 1.5rem !important; 
    }
    .input-group-text {
        background-color: var(--input-text-addon-bg) !important;
        border: 1px solid var(--input-text-addon-border) !important;
        color: var(--text-color-primary) !important; 
        border-radius: 0.5rem 0 0 0.5rem !important; 
    }
    .form-control { 
        background-color: var(--input-bg) !important;
        border: 1px solid var(--input-border) !important;
        color: var(--text-color-primary) !important; 
        border-radius: 0 0.5rem 0.5rem 0 !important; 
        padding: 0.75rem 1rem !important; 
    }
    .odd-input {
        text-align: center !important;
    }
    .badge-secondary-custom {
        background-color: var(--badge-secondary-bg) !important; 
        color: var(--text-color-primary) !important; 
        padding: 0.5em 0.8em !important; 
        border-radius: 0.3rem !important;
    }
    .copy-btn {
        margin-left: 8px !important; 
        text-decoration: none !important;
        font-weight: 500 !important; 
        font-size: 0.8rem !important; 
        color: var(--copy-btn-color) !important;
        transition: color 0.2s ease;
    }
    .copy-btn:hover {
        color: var(--button-primary-bg) !important; 
    }
    .btn-primary { 
        background-color: var(--button-primary-bg) !important; 
        border-color: var(--button-primary-border) !important;
        color: var(--button-primary-text) !important;
        font-weight: 600 !important; 
        padding: 0.75rem 1.5rem !important; 
        border-radius: 0.5rem !important;
        box-shadow: 0 3px 6px rgba(0,0,0,0.1); 
        transition: all 0.3s ease;
    }
    .btn-primary:hover {
        transform: translateY(-2px); 
        box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .btn-warning-custom {
        background-color: var(--button-secondary-bg) !important; 
        color: var(--button-secondary-text) !important; 
        font-weight: 600 !important; 
        padding: 0.75rem 1.5rem !important; 
        border-radius: 0.5rem !important;
        box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }
    .btn-warning-custom:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .value-cell-content {
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        height: 100% !important;
        padding: 0 !important;
    }
    .value-cell-content .badge {
        margin-right: 5px !important;
    }
    .info-section h5 .badge {
        background-color: var(--info-badge-bg) !important; 
        color: white !important;
        padding: 0.5rem 1rem !important;
        border-radius: 1.5rem !important; 
        font-size: 1rem !important;
        font-weight: 600 !important;
        margin-bottom: 1rem; 
        display: inline-block; 
    }
    .info-section p {
        margin-bottom: 0.8rem !important; 
        color: var(--text-color-secondary) !important; 
        line-height: 1.6; 
    }
    .info-section a {
        color: var(--info-link-color) !important; 
        font-weight: 500 !important;
    }

    /* ESTILOS DO TOGGLE SWITCH - MAIS BONITO E INTERATIVO */
    .theme-toggle-container {
        position: absolute;
        top: 20px; 
        right: 20px; 
        z-index: 10;
    }
    .theme-toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px; 
        height: 34px; 
    }
    .theme-toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--toggle-bg-off); 
        -webkit-transition: .4s;
        transition: .4s;
        border-radius: 34px; 
        box-shadow: inset 0 0 5px rgba(0,0,0,0.2); 
    }
    .slider:before {
        position: absolute;
        content: "";
        height: 26px; 
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: var(--toggle-circle-off); 
        -webkit-transition: .4s;
        transition: .4s;
        border-radius: 50%; 
        box-shadow: 0 2px 3px rgba(0,0,0,0.2); 
    }
    .theme-toggle-switch input:checked + .slider {
        background-color: var(--toggle-bg-on); 
    }
    .theme-toggle-switch input:focus + .slider {
        box-shadow: 0 0 1px var(--toggle-bg-on);
    }
    .theme-toggle-switch input:checked + .slider:before {
        -webkit-transform: translateX(26px); 
        -ms-transform: translateX(26px);
        transform: translateX(26px);
        background-color: var(--toggle-circle-on); 
    }
    /* Ícones dentro do slider - TAMANHO E COR AJUSTADOS */
    .slider .icon-sun, .slider .icon-moon {
        position: absolute;
        font-size: 16px; /* AUMENTADO O TAMANHO DA FONTE DOS ÍCONES */
        line-height: 34px; /* Centraliza verticalmente com nova altura do slider */
        transition: opacity 0.4s ease, transform 0.4s ease;
        opacity: 0; 
        font-weight: 900; 
    }
    .slider .icon-moon { 
        left: 8px; 
        color: var(--toggle-icon-color-off); 
        opacity: 1; 
    }
    .slider .icon-sun { 
        right: 8px; 
        color: var(--toggle-icon-color-on); 
        opacity: 0; 
    }
    .theme-toggle-switch input:checked + .slider .icon-moon {
        opacity: 0; 
        transform: translateX(-5px); 
    }
    .theme-toggle-switch input:checked + .slider .icon-sun {
        opacity: 1; 
        transform: translateX(0); 
    }


    /* Ajustes para telas menores */
    @media (max-width: 768px) { 
        .container-custom {
            width: 95% !important;
            padding: 1rem !important;
            margin: 1rem auto !important;
        }
        h1 {
            font-size: 2rem !important; 
        }
        .logo-display img {
            max-height: 100px; 
        }
        #lucroDisplay, #retornoTotalDisplay {
            font-size: 1rem !important; 
            padding: 0.4rem 0.6rem !important;
        }
        .input-group-text, .form-control {
            padding: 0.6rem 0.8rem !important; 
        }
        .odd-label {
            display: none !important; 
        }
        .theme-toggle-container { 
            top: 10px;
            right: 10px;
        }
        .theme-toggle-switch { 
            width: 50px; 
            height: 28px;
        }
        .slider:before {
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
        }
        .theme-toggle-switch input:checked + .slider:before {
            transform: translateX(22px); 
        }
        .slider .icon-sun, .slider .icon-moon {
            font-size: 14px; 
            line-height: 28px;
        }
        /* Ajuste para alinhar Lucro/Retorno em mobile */
        .row.mobile-align-center {
            display: flex;
            flex-direction: row; /* Mantém em linha */
            justify-content: center; /* Centraliza o conteúdo horizontalmente */
            gap: 10px; /* Espaço entre os itens */
        }
        .row.mobile-align-center > div {
            flex: 1; /* Permite que as colunas se expandam igualmente */
            max-width: 50%; /* Limita para não ficarem muito grandes */
            text-align: center; /* Centraliza o texto dentro da coluna */
        }
        .row.mobile-align-center strong {
            display: block; /* Garante que "Lucro:" e "Retorno:" fiquem em sua própria linha */
            margin-bottom: 5px; /* Espaçamento abaixo do texto */
        }
    }
    @media (max-width: 576px) { 
        .container-custom {
            padding: 0.75rem !important;
        }
        .info-section h5 .badge {
            font-size: 0.9rem !important; 
            padding: 0.4rem 0.8rem !important;
        }
        .btn-primary, .btn-warning-custom {
            padding: 0.6rem 1rem !important; 
            font-size: 0.9rem !important;
        }
    }
  </style>
</head>
<body>
  <div class="container-custom">
    <div class="theme-toggle-container">
        <label class="theme-toggle-switch">
            <input type="checkbox" id="themeToggleCheckbox">
            <span class="slider">
                <i class="fas fa-moon icon-moon"></i>
                <i class="fas fa-sun icon-sun"></i>
            </span>
        </label>
    </div>

    <div class="logo-display">
        <img src="aposta_sem_risco_favicon.png" alt="Logo Gol de Bet - Aposta Sem Risco">
    </div>

    <h1 class="text-3xl text-center">Aposta Sem Risco</h1> <div class="mb-3">
        <strong>Investimento:</strong>
        <div class="input-group">
            <span class="input-group-text">R$</span>
            <input type="text" id="valorTotal" placeholder="0,00" class="form-control" onkeyup="handleStakeInput(this)" onblur="formatStakeOnBlur(this)" value="" />
        </div>
    </div>

    <div class="row mb-3 text-center mobile-align-center"> 
        <div class="col-6">
            <strong>Lucro:</strong> <span id="lucroDisplay" class="badge bg-success-custom">R$ 0,00</span>
        </div>
        <div class="col-6">
            <strong>Retorno:</strong> <span id="retornoTotalDisplay" class="badge bg-secondary-custom">R$ 0,00</span>
        </div>
    </div>

    <table class="table table-responsive table-sm table-borderless table-striped">
        <thead class="table-dark">
            <tr>
                <th style="text-align: center;">Odds</th>
                <th style="text-align: center;">Investimento</th>
                <th style="text-align: center;">Retorno</th>
            </tr>
        </thead>
        <tbody id="oddsTableBody">
            </tbody>
        <tfoot>
            <tr>
                <td colspan="3" class="text-center">
                    <button id="adicionarLinhaBtn" type="button" class="btn btn-primary btn-sm w-100 mt-3 mb-2" onclick="adicionarLinha()">Adicionar Mais Linhas</button>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <button type="button" onclick="reiniciar()" class="btn btn-warning-custom btn-sm w-100 mt-2">Reiniciar Calculadora</button>
                </td>
            </tr>
            <tr>
                <td colspan="3" class="info-section">
                    <h5><span class="badge bg-primary">O que significam os termos:</span></h5>
                    <p><strong>Investimento:</strong> O capital que você aloca estrategicamente em suas seleções para garantir um resultado, cobrindo diferentes cenários.</p>
                    <p><strong>Lucro:</strong> O ganho líquido que você realiza, independentemente da seleção vencedora, após todas as suas apostas serem contabilizadas e o investimento inicial coberto.</p>
                    <p><strong>Retorno:</strong> O valor total que retorna ao seu bolso quando uma de suas apostas é vitoriosa, incluindo o que foi apostado naquela linha.</p>
                </td>
            </tr>
            <tr>
                <td colspan="3" class="info-section">
                    <h5><span class="badge bg-primary">Desvendando o Dutching:</span></h5>
                    <p>Dutching é uma técnica inteligente de aposta onde você divide seu investimento em múltiplos resultados dentro de um mesmo evento. O objetivo é ajustar a quantia apostada em cada opção de forma que, se qualquer uma delas vencer, seu lucro seja o mesmo. Isso ajuda a mitigar riscos e a explorar cenários com maior flexibilidade.</p>
                </td>
            </tr>
            <tr>
                <td colspan="3" class="info-section">
                    <h5><span class="badge bg-primary">Dominando as Odds:</span></h5>
                    <p>Odds (cotações) são o coração das apostas. Elas refletem a probabilidade estimada de um evento e definem o quanto você pode ganhar. Odds menores indicam maior chance e menor lucro, enquanto odds maiores oferecem um prêmio mais alto para eventos menos prováveis. Nossa calculadora simplifica isso usando odds decimais, tornando a análise rápida e eficaz.</p>
                </td>
            </tr>
        </tfoot>
    </table>
  </div>

  <script>
    // Formatador para moeda Real (BRL)
    const currencyFormatter = new Intl.NumberFormat('pt-BR', {
      style: 'currency',
      currency: 'BRL',
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });

    // Função para formatar números para exibição como moeda (com vírgula para decimal)
    function formatToBRL(value) {
      if (isNaN(value)) {
        return "R$ 0,00";
      }
      return currencyFormatter.format(value);
    }

    // Limpa valor de MOEDA (Investimento) para cálculo
    // Remove R$, espaços, PONTOS DE MILHAR, e substitui vírgula por ponto decimal.
    function cleanCurrencyValue(value) {
      return String(value)
        .replace(/[R$ ]/g, '')   // Remove R$ e espaços
        .replace(/\./g, '')     // Remove PONTOS DE MILHAR (ex: 1.000,00 -> 1000,00)
        .replace(/,/g, '.');    // Substitui VÍRGULA por PONTO DECIMAL (ex: 1000,00 -> 1000.00)
    }

    // Limpa valor DECIMAL (Odds) para cálculo
    // Apenas substitui vírgula por ponto decimal. NÃO remove pontos existentes.
    function cleanDecimalValue(value) {
        return String(value).replace(/,/g, '.'); 
    }

    // --- Funções de tratamento de input para Odds ---
    function handleOddInput(inputElement) {
      inputElement.value = inputElement.value.replace(",", "."); 
      calcularDutching();
    }

    function formatOddOnBlur(inputElement) {
        let value = inputElement.value;
        value = cleanDecimalValue(value); 

        let parsedValue = parseFloat(value);
        if (value === "" || isNaN(parsedValue)) {
            inputElement.value = ""; 
        } else {
            inputElement.value = parsedValue.toFixed(2); 
        }
        calcularDutching();
    }

    // --- Funções de tratamento de input para Valor Total ---
    function handleStakeInput(inputElement) {
      inputElement.value = inputElement.value.replace(",", ".");
      calcularDutching();
    }

    function formatStakeOnBlur(inputElement) {
        let value = cleanCurrencyValue(inputElement.value);
        let parsedValue = parseFloat(value);

        if (value !== "" && !isNaN(parsedValue)) {
            inputElement.value = formatToBRL(parsedValue); 
        } else {
            inputElement.value = "";
        }
        calcularDutching();
    }

    // --- Função principal de Cálculo ---
    function calcularDutching() {
      const valorTotalInput = document.getElementById("valorTotal");
      const stakeString = cleanCurrencyValue(valorTotalInput.value);
      const stake = parseFloat(stakeString);

      const oddsInputs = Array.from(document.querySelectorAll(".odd-input"));
      const odds = oddsInputs
        .map(input => {
            const cleanOdd = cleanDecimalValue(input.value); 
            const floatOdd = parseFloat(cleanOdd);
            return floatOdd;
        })
        .filter(o => !isNaN(o) && o > 0);

      const lucroTotalDisplay = document.getElementById("lucroDisplay");
      const retornoTotalDisplay = document.getElementById("retornoTotalDisplay");

      if (lucroTotalDisplay) lucroTotalDisplay.textContent = formatToBRL(0);
      if (retornoTotalDisplay) retornoTotalDisplay.textContent = formatToBRL(0);

      oddsInputs.forEach((input) => {
        const oddIndex = input.dataset.oddIndex;
        if (oddIndex) {
            const apostaSpan = document.getElementById(`aposta-${oddIndex}`);
            const retornoSpan = document.getElementById(`retorno-${oddIndex}`);
            if (apostaSpan) apostaSpan.textContent = '';
            if (retornoSpan) retornoSpan.textContent = '';
        }
      });


      if (isNaN(stake) || stake <= 0 || odds.length < 2) {
        if (lucroTotalDisplay) {
            lucroTotalDisplay.classList.remove('bg-danger-custom');
            lucroTotalDisplay.classList.add('bg-success-custom');
        }
        return;
      }

      const inversos = odds.map(o => 1 / o);
      const somaInversos = inversos.reduce((a, b) => a + b, 0);

      if (somaInversos === 0 || isNaN(somaInversos)) {
        if (lucroTotalDisplay) {
            lucroTotalDisplay.classList.remove('bg-danger-custom');
            lucroTotalDisplay.classList.add('bg-success-custom');
        }
        return;
      }

      let menorLucro = Infinity; 

      odds.forEach((o, i) => {
        const proporcao = inversos[i] / somaInversos;
        let aposta = stake * proporcao;
        let retornoBruto = aposta * o;

        aposta = parseFloat(aposta.toFixed(2));
        retornoBruto = parseFloat(retornoBruto.toFixed(2));
        
        const lucroCalculado = retornoBruto - stake;

        if (lucroCalculado < menorLucro) {
            menorLucro = lucroCalculado;
        }

        const oddIndex = oddsInputs[i].dataset.oddIndex;
        if (oddIndex) {
            const apostaSpan = document.getElementById(`aposta-${oddIndex}`);
            const retornoSpan = document.getElementById(`retorno-${oddIndex}`);

            if (apostaSpan) apostaSpan.textContent = formatToBRL(aposta);
            if (retornoSpan) retornoSpan.textContent = formatToBRL(retornoBruto);
        }
      });

      if (menorLucro !== Infinity) {
          if (lucroTotalDisplay) {
              lucroTotalDisplay.textContent = formatToBRL(menorLucro);
              if (menorLucro < 0) {
                  lucroTotalDisplay.classList.remove('bg-success-custom');
                  lucroTotalDisplay.classList.add('bg-danger-custom');
              } else {
                  lucroTotalDisplay.classList.remove('bg-danger-custom');
                  lucroTotalDisplay.classList.add('bg-success-custom');
              }
          }
          if (retornoTotalDisplay) retornoTotalDisplay.textContent = formatToBRL(stake + menorLucro);
      }
    }

    // --- Funções de Ação ---
    let currentOddIndex = 0; 

    function criarLinhaOdd(index, value = "") {
        const newRow = document.createElement("tr");
        newRow.innerHTML = `
            <td class="align-middle">
                <div class="input-group">
                    <span class="input-group-text odd-label">${index}º</span>
                    <input type="text" placeholder="Odd" class="form-control odd-input" data-odd-index="${index}" onkeyup="handleOddInput(this)" onblur="formatOddOnBlur(this)" value="${value}" />
                </div>
            </td>
            <td class="align-middle" style="text-align: center; padding: 0;">
                <div class="value-cell-content">
                    <span id="aposta-${index}" class="badge badge-secondary-custom"></span>
                    <a href="#" onclick="copyValue('aposta-${index}'); return false;" class="copy-btn">copiar</a>
                </div>
            </td>
            <td class="align-middle" style="text-align: center; padding: 0;">
                <div class="value-cell-content">
                    <span id="retorno-${index}" class="badge badge-secondary-custom"></span>
                </div>
            </td>
        `;
        return newRow;
    }

    function adicionarLinha() {
      currentOddIndex++; 
      const tableBody = document.getElementById("oddsTableBody");
      tableBody.appendChild(criarLinhaOdd(currentOddIndex));
      calcularDutching();
    }

    function reiniciar() {
      const tableBody = document.getElementById("oddsTableBody");
      tableBody.innerHTML = ''; 
      currentOddIndex = 0;

      adicionarLinha(); 
      adicionarLinha(); 

      document.getElementById("valorTotal").value = ""; 
      formatStakeOnBlur(document.getElementById("valorTotal")); 

      const lucroTotalDisplay = document.getElementById("lucroDisplay");
      const retornoTotalDisplay = document.getElementById("retornoTotalDisplay");
      if (lucroTotalDisplay) lucroTotalDisplay.textContent = formatToBRL(0);
      if (retornoTotalDisplay) retornoTotalDisplay.textContent = formatToBRL(0);

      if (lucroTotalDisplay) {
          lucroTotalDisplay.classList.remove('bg-danger-custom');
          lucroTotalDisplay.classList.add('bg-success-custom');
      }

      calcularDutching();
    }

    // --- Função para Copiar Valor ---
    function copyValue(spanId) {
        const valueToCopy = document.getElementById(spanId).innerText.trim(); 
        const tempInput = document.createElement("input");
        document.body.appendChild(tempInput);
        tempInput.value = valueToCopy;
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);
    }

    // --- Lógica do Tema (Dark Mode) ---
    const themeToggleCheckbox = document.getElementById('themeToggleCheckbox'); 
    const htmlElement = document.documentElement; // O elemento <html>

    function loadTheme() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            htmlElement.classList.add('dark-theme');
            themeToggleCheckbox.checked = true; 
        } else {
            htmlElement.classList.remove('dark-theme');
            themeToggleCheckbox.checked = false; 
        }
    }

    function toggleTheme() { 
        if (themeToggleCheckbox.checked) { 
            htmlElement.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
        } else { 
            htmlElement.classList.remove('dark-theme');
            localStorage.setItem('theme', 'light');
        }
    }

    // --- Inicialização ao carregar a página ---
    document.addEventListener("DOMContentLoaded", function() {
        loadTheme(); 
        themeToggleCheckbox.addEventListener('change', toggleTheme); 
        reiniciar(); 
    });
  </script>
</body>
</html>
